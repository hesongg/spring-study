### 스프링 웹 MVC - 백엔드 웹 개발 활용 기술

#### Reference) 
	* 스프링 MVC 2편 - 백엔드 웹 개발 활용 기술 (인프런 김영한님 강의 학습한 내용 정리)

#### 작성 코드
- https://github.com/hesongg/SpringMVC-Practice-Login
	
<br>


### 로그인 처리1 - 쿠키, 세션

- 회원가입과 로그인 기능은 간단하게 구현하였음 - 코드 참고

<br>

#### 로그인 처리하기 - 쿠키 사용

- 쿠키 
	- 서버에서 로그인에 성공하면 HTTP 응답에 쿠키를 담아서 브라우저에 전달하자. 그러면 브라우저는 앞으로 해당 쿠키를 지속해서 보내준다.
	

- 쿠키에는 영속 쿠키와 세션 쿠키가 있음
	- 영속 쿠키 : 만료 날짜를 입력하면 해당 날짜까지 유지
	- 세션 쿠키 : 만료 날짜를 생략하면 브라우저 종료시 까지만 유지
	
	- 브라우저 종료시 로그아웃이 되길 기대하므로, 우리에게 필요한 것은 세션 쿠키이다
	
<br>

- 코드로 구현
	- 로그인 컨트롤러에 쿠키 생성 로직 추가
		- 로그인에 성공하면 쿠키를 생성하고 ```HttpServletResponse``` 에 담는다. 쿠키 이름은 ```memberId``` 이고, 
			값은 회원의 ```id``` 를 담아둔다. 웹 브라우저는 종료 전까지 회원의 ```id``` 를 서버에 계속 보내줄 것이다.
			
	- 로그인 홈 화면에서 로그인 되어있는 유저 명 보이도록 수정
		- ```@CookieValue``` 를 사용하면 편리하게 쿠키를 조회할 수 있다.
		- 로그인 하지 않은 사용자도 홈에 접근할 수 있기 때문에 ```required = false``` 를 사용한다.
		
		- 로그인 쿠키( ```memberId``` )가 없는 사용자는 기존 ```home``` 으로 보낸다. 
			- 추가로 로그인 쿠키가 있어도 회원이 없으면 ```home``` 으로 보낸다.
		
		- 로그인 쿠키( ```memberId``` )가 있는 사용자는 로그인 사용자 전용 홈 화면인 ```loginHome``` 으로 보낸다. 
			- 추가로 홈 화면에 화원 관련 정보도 출력해야 해서 ```member``` 데이터도 모델에 담아서 전달한다.
			
	- 로그 아웃 기능
		- 로그아웃 방법은 다음과 같다.
			- 세션 쿠키이므로 웹 브라우저 종료시
			- 서버에서 해당 쿠키의 종료 날짜를 0으로 지정
		
		- 로그인 컨트롤러에 설정한 쿠키의 ```maxAge```를 0으로 설정하여 로그아웃 기능을 구현하였음
